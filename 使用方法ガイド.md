# 📚 RAG システム使用ガイド

## 🎯 RAG システムの使い方

### 方法 1: Web アプリ版（推奨） 🌐

#### 1. アプリの起動

ターミナルで以下を実行：

```bash
cd /home/kyonko/dev/AKATUKI/testRAG
python3 -m streamlit run rag_system.py
```

**注意**: 仮想環境でエラーが出る場合は、システムの Python 環境を使用してください。

#### 2. ブラウザでアクセス

- 自動的にブラウザが開きます（通常は数秒後）
- または手動で `http://localhost:8501` にアクセス
- アプリが起動すると "You can now view your Streamlit app in your browser." というメッセージが表示されます

#### 3. 操作手順

1. **API キー確認**:

   - 「🔑 API キー設定の確認」を展開
   - 緑のチェックマークが表示されることを確認

2. **文書アップロード**:

   - 左のサイドバーの「📄 文書アップロード」
   - PDF ファイルを選択してアップロード

3. **文書処理の待機**:

   - システムが自動的に文書を処理（1-3 分程度）
   - プログレスバーで進行状況を確認

4. **質問入力**:

   - 「💬 質問してください」欄に質問を入力
   - 例：「この文書の主な内容は何ですか？」

5. **回答取得**:
   - 「🚀 回答を生成」ボタンをクリック
   - AI が文書内容に基づいて回答

---

### 方法 2: コマンドライン版 💻

#### 1. シンプルな例の実行

```bash
# 最新版（推奨）
python3 simple_example_fixed_v2.py

# または元のバージョン
python3 simple_example_fixed.py
```

#### 2. 動作確認

- サンプル文書での質問応答デモが実行されます
- RAG の基本的な動作が理解できます
- Gemini の最新モデルを使用

## 🔧 具体的な使用例

### 📖 例 1: 技術文書の理解

1. **アップロード**: プログラミング関連の PDF マニュアル
2. **質問例**:
   - 「この技術の主な特徴は何ですか？」
   - 「インストール方法を教えてください」
   - 「エラーの対処法はありますか？」

### 📚 例 2: 学術論文の分析

1. **アップロード**: 研究論文の PDF
2. **質問例**:
   - 「この研究の目的は何ですか？」
   - 「実験方法について説明してください」
   - 「結論をまとめてください」

### 📋 例 3: 業務文書の確認

1. **アップロード**: 会議資料や仕様書
2. **質問例**:
   - 「プロジェクトのスケジュールは？」
   - 「責任者は誰ですか？」
   - 「予算はどのくらいですか？」

---

## ⚡ RAG システムの特徴

### ✅ できること

- **正確な回答**: 文書内容に基づいた信頼性の高い回答
- **関連情報検索**: 質問に関連する部分を自動検索
- **多言語対応**: 日本語文書でも高精度で処理
- **大容量対応**: 長い文書も効率的に処理

### 📈 処理の流れ

1. **文書読み込み** → PDF からテキスト抽出
2. **チャンク分割** → 検索しやすい小さな単位に分割
3. **ベクトル化** → AI が理解できる数値形式に変換
4. **検索実行** → 質問に関連する部分を発見
5. **回答生成** → Gemini が検索結果をもとに回答作成

---

## 🚨 注意事項

### API 使用量

- Gemini API には使用制限があります
- 大量の質問を連続で行う場合はご注意ください

### ファイルサイズ

- 推奨: 10MB 以下の PDF ファイル
- 大きなファイルは処理に時間がかかります

### 言語対応

- 日本語と英語で最適化済み
- その他の言語でも動作しますが精度が下がる可能性

---

## 🛠 トラブルシューティング

### 問題 1: API キーエラー

**症状**: 「Gemini API キーが設定されていません」
**解決**: `.env`ファイルの`GOOGLE_API_KEY`を確認

### 問題 2: 文書処理エラー

**症状**: 「文書の処理に失敗しました」
**解決**: PDF ファイルが破損していないか確認

### 問題 3: 回答が生成されない

**症状**: エラーメッセージが表示される
**解決**: インターネット接続と API 制限を確認

### 問題 4: 処理が遅い

**症状**: 文書処理に時間がかかる
**解決**: ファイルサイズを小さくするか、時間をおいて再試行

---

## 🎓 学習のヒント

### RAG を理解するために

1. **simple_example.py**を実行して RAG の基本を理解
2. **小さな PDF ファイル**から始める
3. **様々な質問パターン**を試す
4. **コード内のコメント**を読んで仕組みを理解

### 質問のコツ

- **具体的な質問**をする
- **文書に含まれそうな内容**を質問する
- **段階的に詳しく**質問していく

---

## 📞 サポート

問題が解決しない場合：

1. `README.md`の詳細ガイドを確認
2. `API_KEY_SETUP.txt`で API キー設定を再確認
3. エラーメッセージの詳細を記録してサポートに連絡
